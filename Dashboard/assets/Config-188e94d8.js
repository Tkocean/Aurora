import{r as z,R as p,q as f,g as n,s as H,c as le,j as c,t as se,v as V,w as G,x as oe,o as J,h as Q,y as ie,l as q,z as ce,u as de,A as ue,D as N,E as he,F as me,G as pe,H as fe,J as ve,K as ge,L as be,C as ye,S,N as we,B as y,O as ke,P as Ce,Q as _e}from"./index-1cc1f100.js";import{r as Oe}from"./logs-8015e173.js";import{S as k}from"./Select-470f4d51.js";import{R as x}from"./rotate-cw-885fad08.js";function I(){return I=Object.assign||function(e){for(var s=1;s<arguments.length;s++){var l=arguments[s];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},I.apply(this,arguments)}function Ne(e,s){if(e==null)return{};var l=Se(e,s),a,t;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)a=r[t],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}function Se(e,s){if(e==null)return{};var l={},a=Object.keys(e),t,r;for(r=0;r<a.length;r++)t=a[r],!(s.indexOf(t)>=0)&&(l[t]=e[t]);return l}var $=z.forwardRef(function(e,s){var l=e.color,a=l===void 0?"currentColor":l,t=e.size,r=t===void 0?24:t,m=Ne(e,["color","size"]);return p.createElement("svg",I({ref:s,xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},m),p.createElement("polyline",{points:"8 17 12 21 16 17"}),p.createElement("line",{x1:"12",y1:"12",x2:"12",y2:"21"}),p.createElement("path",{d:"M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"}))});$.propTypes={color:f.string,size:f.oneOfType([f.string,f.number])};$.displayName="DownloadCloud";const xe=$;function L(){return L=Object.assign||function(e){for(var s=1;s<arguments.length;s++){var l=arguments[s];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},L.apply(this,arguments)}function Pe(e,s){if(e==null)return{};var l=je(e,s),a,t;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)a=r[t],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}function je(e,s){if(e==null)return{};var l={},a=Object.keys(e),t,r;for(r=0;r<a.length;r++)t=a[r],!(s.indexOf(t)>=0)&&(l[t]=e[t]);return l}var R=z.forwardRef(function(e,s){var l=e.color,a=l===void 0?"currentColor":l,t=e.size,r=t===void 0?24:t,m=Pe(e,["color","size"]);return p.createElement("svg",L({ref:s,xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},m),p.createElement("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),p.createElement("polyline",{points:"16 17 21 12 16 7"}),p.createElement("line",{x1:"21",y1:"12",x2:"9",y2:"12"}))});R.propTypes={color:f.string,size:f.oneOfType([f.string,f.number])};R.displayName="LogOut";const Ie=R;function E(){return E=Object.assign||function(e){for(var s=1;s<arguments.length;s++){var l=arguments[s];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},E.apply(this,arguments)}function Le(e,s){if(e==null)return{};var l=Ee(e,s),a,t;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)a=r[t],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}function Ee(e,s){if(e==null)return{};var l={},a=Object.keys(e),t,r;for(r=0;r<a.length;r++)t=a[r],!(s.indexOf(t)>=0)&&(l[t]=e[t]);return l}var T=z.forwardRef(function(e,s){var l=e.color,a=l===void 0?"currentColor":l,t=e.size,r=t===void 0?24:t,m=Le(e,["color","size"]);return p.createElement("svg",E({ref:s,xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},m),p.createElement("polyline",{points:"3 6 5 6 21 6"}),p.createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),p.createElement("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),p.createElement("line",{x1:"14",y1:"11",x2:"14",y2:"17"}))});T.propTypes={color:f.string,size:f.oneOfType([f.string,f.number])};T.displayName="Trash2";const ze=T,{useState:$e,useRef:Re,useEffect:Te,useCallback:Me}=p;function P(e){return n("input",{className:H.input,...e})}function De({value:e,...s}){const[l,a]=$e(e),t=Re(e);Te(()=>{t.current!==e&&a(e),t.current=e},[e]);const r=Me(m=>a(m.target.value),[a]);return n("input",{className:H.input,value:l,onChange:r,...s})}const Fe="_root_1vck5_4",We="_section_1vck5_5",Be="_wrapSwitch_1vck5_30",Ue="_sep_1vck5_36",Ae="_label_1vck5_49",i={root:Fe,section:We,wrapSwitch:Be,sep:Ue,label:Ae},Ve="_fieldset_1hnn2_1",Ge="_input_1hnn2_10",He="_cnt_1hnn2_10",j={fieldset:Ve,input:Ge,cnt:He};function Je({OptionComponent:e,optionPropsList:s,selectedIndex:l,onChange:a}){const t=le("visually-hidden",j.input),r=m=>{a(m.target.value)};return n("fieldset",{className:j.fieldset,children:s.map((m,d)=>c("label",{children:[n("input",{type:"radio",checked:l===d,name:"selection",value:d,"aria-labelledby":"traffic chart type "+d,onChange:r,className:t}),n("div",{className:j.cnt,children:n(e,{...m})})]},d))})}const{useMemo:Qe}=J,qe={plugins:{legend:{display:!1}},scales:{x:{display:!1,type:"category"},y:{display:!1,type:"linear"}}},K=[23e3,35e3,46e3,33e3,9e4,68e3,23e3,45e3],Ke=[184e3,183e3,196e3,182e3,19e4,186e3,182e3,189e3],Xe=K;function Ye({id:e}){const s=se.read(),l=Qe(()=>({labels:Xe,datasets:[{...V,...G[e].up,data:K},{...V,...G[e].down,data:Ke}]}),[e]),a="chart-"+e;return oe(s.Chart,a,l,null,qe),n("div",{style:{width:80,padding:5},children:n("canvas",{id:a})})}const{useEffect:X,useState:Ze,useCallback:v,useRef:et}=J,tt=[{id:0},{id:1},{id:2},{id:3}],nt=[["debug","Debug"],["info","Info"],["warning","Warning"],["error","Error"],["silent","Silent"]],at=[{key:"port",label:"Http Port"},{key:"socks-port",label:"Socks5 Port"},{key:"mixed-port",label:"Mixed Port"},{key:"redir-port",label:"Redir Port"},{key:"mitm-port",label:"MITM Port"}],rt=[["zh-cn","简体中文"],["zh-tw","繁體中文"],["en","English"]],lt=[["direct","Direct"],["rule","Rule"],["script","Script"],["global","Global"]],st=[["gvisor","gVisor"],["system","System"],["lwip","LWIP"]],ot=e=>({configs:ie(e),apiConfig:q(e)}),it=e=>({selectedChartStyleIndex:Ce(e),latencyTestUrl:_e(e),apiConfig:q(e)}),ct=Q(it)(ht),gt=Q(ot)(dt);function dt({dispatch:e,configs:s,apiConfig:l}){return X(()=>{e(ce(l))},[e,l]),n(ct,{configs:s})}function ut(e){return e&&e.meta&&!e.premium?"Clash.Meta ":e&&e.meta&&e.premium?"sing-box ":"Clash Premium"}function ht({dispatch:e,configs:s,selectedChartStyleIndex:l,latencyTestUrl:a,apiConfig:t}){var W,B,U,A;const{t:r,i18n:m}=de(),[d,C]=Ze(s),M=et(s);X(()=>{M.current!==s&&C(s),M.current=s},[s]);const Y=v(()=>{e(ue("apiConfig"))},[e]),_=v((o,u)=>{C({...d,[o]:u})},[d]),D=v((o,u)=>{const g={...d.tun,[o]:u};C({...d,tun:{...g}})},[d]),b=v(({name:o,value:u})=>{switch(o){case"mode":case"log-level":case"allow-lan":case"sniffing":_(o,u),e(N(t,{[o]:u})),o==="log-level"&&Oe({...t,logLevel:u});break;case"mitm-port":case"redir-port":case"socks-port":case"mixed-port":case"port":if(u!==""){const g=parseInt(u,10);if(g<0||g>65535)return}_(o,u);break;case"enable":case"stack":D(o,u),e(N(t,{tun:{[o]:u}}));break;default:return}},[t,e,_,D]),{selectChartStyleIndex:Z,updateAppConfig:F}=he(),w=v(o=>{const{name:u,value:g}=o.target;switch(u){case"port":case"socks-port":case"mixed-port":case"redir-port":case"mitm-port":{const O=parseInt(g,10);if(O<0||O>65535)return;e(N(t,{[u]:O}));break}case"latencyTestUrl":{F(u,g);break}case"device name":case"interface name":break;default:throw new Error(`unknown input name ${u}`)}},[t,e,F]),ee=v(()=>{e(me(t))},[t,e]),te=v(()=>{e(pe(t))},[t,e]),ne=v(()=>{e(fe(t))},[t,e]),ae=v(()=>{e(ve(t))},[t,e]),re=v(()=>{e(ge(t))},[t,e]),{data:h}=be(["/version",t],()=>ke("/version",t));return c("div",{children:[n(ye,{title:r("Config")}),c("div",{className:i.root,children:[h.meta&&h.premium||at.map(o=>d[o.key]!==void 0?c("div",{children:[n("div",{className:i.label,children:o.label}),n(P,{name:o.key,value:d[o.key],onChange:({target:{name:u,value:g}})=>b({name:u,value:g}),onBlur:w})]},o.key):null),c("div",{children:[n("div",{className:i.label,children:"Mode"}),n(k,{options:lt,selected:d.mode.toLowerCase(),onChange:o=>b({name:"mode",value:o.target.value})})]}),c("div",{children:[n("div",{className:i.label,children:"Log Level"}),n(k,{options:nt,selected:d["log-level"].toLowerCase(),onChange:o=>b({name:"log-level",value:o.target.value})})]}),h.meta&&h.premium||c("div",{children:[n("div",{className:i.label,children:r("allow_lan")}),n("div",{className:i.wrapSwitch,children:n(S,{name:"allow-lan",checked:d["allow-lan"],onChange:o=>b({name:"allow-lan",value:o})})})]}),h.meta&&!h.premium&&c("div",{children:[n("div",{className:i.label,children:r("tls_sniffing")}),n("div",{className:i.wrapSwitch,children:n(S,{name:"sniffing",checked:d.sniffing,onChange:o=>b({name:"sniffing",value:o})})})]})]}),n("div",{className:i.sep,children:n("div",{})}),h.meta&&c(we,{children:[h.premium||c("div",{children:[c("div",{className:i.section,children:[c("div",{children:[n("div",{className:i.label,children:r("enable_tun_device")}),n("div",{className:i.wrapSwitch,children:n(S,{checked:(W=d.tun)==null?void 0:W.enable,onChange:o=>b({name:"enable",value:o})})})]}),c("div",{children:[n("div",{className:i.label,children:"TUN IP Stack"}),n(k,{options:st,selected:(U=(B=d.tun)==null?void 0:B.stack)==null?void 0:U.toLowerCase(),onChange:o=>b({name:"stack",value:o.target.value})})]}),c("div",{children:[n("div",{className:i.label,children:"Device Name"}),n(P,{name:"device name",value:(A=d.tun)==null?void 0:A.device,onChange:w})]}),c("div",{children:[n("div",{className:i.label,children:"Interface Name"}),n(P,{name:"interface name",value:d["interface-name"]||"",onChange:w})]})]}),n("div",{className:i.sep,children:n("div",{})})]}),c("div",{className:i.section,children:[c("div",{children:[n("div",{className:i.label,children:"Reload"}),n(y,{start:n(x,{size:16}),label:r("reload_config_file"),onClick:ee})]}),h.meta&&!h.premium&&c("div",{children:[n("div",{className:i.label,children:"GEO Databases"}),n(y,{start:n(xe,{size:16}),label:r("update_geo_databases_file"),onClick:ae})]}),c("div",{children:[n("div",{className:i.label,children:"FakeIP"}),n(y,{start:n(ze,{size:16}),label:r("flush_fake_ip_pool"),onClick:re})]}),h.meta&&!h.premium&&c("div",{children:[n("div",{className:i.label,children:"Restart"}),n(y,{start:n(x,{size:16}),label:r("restart_core"),onClick:te})]}),h.meta&&!h.premium&&c("div",{children:[n("div",{className:i.label,children:"⚠️ Upgrade ⚠️"}),n(y,{start:n(x,{size:16}),label:r("upgrade_core"),onClick:ne})]})]}),n("div",{className:i.sep,children:n("div",{})})]}),c("div",{className:i.section,children:[c("div",{children:[n("div",{className:i.label,children:r("latency_test_url")}),n(De,{name:"latencyTestUrl",type:"text",value:a,onBlur:w})]}),c("div",{children:[n("div",{className:i.label,children:r("lang")}),n("div",{children:n(k,{options:rt,selected:m.language,onChange:o=>m.changeLanguage(o.target.value)})})]}),c("div",{children:[n("div",{className:i.label,children:r("chart_style")}),n(Je,{OptionComponent:Ye,optionPropsList:tt,selectedIndex:l,onChange:Z})]}),c("div",{children:[c("div",{className:i.label,children:[r("current_backend"),n("p",{children:ut(h)+(t==null?void 0:t.baseURL)})]}),n("div",{className:i.label,children:"Action"}),n(y,{start:n(Ie,{size:16}),label:r("switch_backend"),onClick:Y})]})]})]})}export{gt as default};
